// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model ReliabilityData {
  id                    Int      @id @default(autoincrement())
  make                  String
  model                 String
  yearStart             Int
  yearEnd               Int
  reliabilityScore      Decimal  @db.Decimal(3, 1)
  expectedLifespanMiles Int
  maintenanceCostRating MaintenanceRating
  partsAvailability     AvailabilityRating
}

model KnownIssue {
  id             Int           @id @default(autoincrement())
  make           String
  model          String
  year             Int? // Adjusting for schema issue? No, wait. 
  // User asked for yearStart, yearEnd.
  yearStart      Int
  yearEnd        Int
  issueName      String
  severity       IssueSeverity
  typicalMileage Int?
  repairCostLow  Int?
  repairCostHigh Int?
  description    String        @db.Text
}

model Analysis {
  id               Int            @id @default(autoincrement())
  vin              String?
  make             String
  model            String
  year             Int
  mileage          Int
  askingPrice      Decimal
  listingText      String?        @db.Text
  reliabilityScore Decimal
  longevityScore   Decimal
  priceScore       Decimal
  overallScore     Decimal
  recommendation   Recommendation
  redFlags         Json
  createdAt        DateTime       @default(now())
}

enum MaintenanceRating {
  LOW
  MEDIUM
  HIGH
}

enum AvailabilityRating {
  EXCELLENT
  GOOD
  FAIR
  POOR
}

enum IssueSeverity {
  MINOR
  MODERATE
  MAJOR
  CRITICAL
}

enum Recommendation {
  BUY
  MAYBE
  PASS
}
